{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { NavigationEnd } from '@angular/router';\nimport jwt_decode from 'jwt-decode';\nexport let AppComponent = class AppComponent {\n  constructor(router, auth) {\n    this.router = router;\n    this.auth = auth;\n    this.navmode = ''; //Initialize the navmode variable\n  }\n\n  ngOnInit() {\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        if (event.urlAfterRedirects === '/admin_dashboard') {\n          this.navAuthentication();\n        }\n      }\n    });\n  }\n  navAuthentication() {\n    const token = localStorage.getItem('authToken');\n    try {\n      const tokenPayload = jwt_decode(token);\n      console.log(tokenPayload);\n      if (tokenPayload.Role === \"Admin\") {\n        this.navmode = \"ADMIN\";\n      } else if (tokenPayload.Role === \"Faculty\") {\n        this.navmode = 'FACULTY';\n      } else if (tokenPayload.Role === \"Student\") {\n        this.navmode = 'STUDENT';\n      }\n      console.log(this.navmode);\n    } catch (error) {\n      localStorage.clear();\n      this.router.navigate(['/']);\n    }\n  }\n  Logout() {\n    this.auth.logout();\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})], AppComponent);","map":{"version":3,"names":["Component","ChangeDetectionStrategy","NavigationEnd","jwt_decode","AppComponent","constructor","router","auth","navmode","ngOnInit","events","subscribe","event","urlAfterRedirects","navAuthentication","token","localStorage","getItem","tokenPayload","console","log","Role","error","clear","navigate","Logout","logout","__decorate","selector","templateUrl","styleUrls","changeDetection","OnPush"],"sources":["D:\\Project Genpact\\UMS\\UniversityApp\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { AuthenticationService } from './authentication.service';\nimport jwt_decode from 'jwt-decode';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppComponent implements OnInit{\n  navmode : string = ''; //Initialize the navmode variable\n  constructor(private router: Router, private auth:AuthenticationService){}\n  ngOnInit(): void {\n  \n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        if (event.urlAfterRedirects === '/admin_dashboard') {\n          this.navAuthentication();\n        }\n      }\n    });\n  }\n\n\n navAuthentication(){\n  const token: any = localStorage.getItem('authToken');\n\n    try{\n      const tokenPayload:any = jwt_decode(token);\n\n      console.log(tokenPayload )\n      if(tokenPayload.Role === \"Admin\"){\n        this.navmode = \"ADMIN\";\n      }\n      else if(tokenPayload.Role === \"Faculty\"){\n        this.navmode = 'FACULTY';\n      }\n      else if(tokenPayload.Role === \"Student\"){\n        this.navmode = 'STUDENT';\n      }\n      console.log(this.navmode)\n    }catch(error) {\n      localStorage.clear();\n      this.router.navigate(['/']);\n    }\n } \n\n Logout(){\n  this.auth.logout();\n }\n\n \n  // title = 'UniversityApp';\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAUC,uBAAuB,QAAQ,eAAe;AAC1E,SAASC,aAAa,QAAgB,iBAAiB;AAEvD,OAAOC,UAAU,MAAM,YAAY;AAQ5B,WAAMC,YAAY,GAAlB,MAAMA,YAAY;EAEvBC,YAAoBC,MAAc,EAAUC,IAA0B;IAAlD,KAAAD,MAAM,GAANA,MAAM;IAAkB,KAAAC,IAAI,GAAJA,IAAI;IADhD,KAAAC,OAAO,GAAY,EAAE,CAAC,CAAC;EACiD;;EACxEC,QAAQA,CAAA;IAEN,IAAI,CAACH,MAAM,CAACI,MAAM,CAACC,SAAS,CAACC,KAAK,IAAG;MACnC,IAAIA,KAAK,YAAYV,aAAa,EAAE;QAClC,IAAIU,KAAK,CAACC,iBAAiB,KAAK,kBAAkB,EAAE;UAClD,IAAI,CAACC,iBAAiB,EAAE;;;IAG9B,CAAC,CAAC;EACJ;EAGDA,iBAAiBA,CAAA;IAChB,MAAMC,KAAK,GAAQC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAElD,IAAG;MACD,MAAMC,YAAY,GAAOf,UAAU,CAACY,KAAK,CAAC;MAE1CI,OAAO,CAACC,GAAG,CAACF,YAAY,CAAE;MAC1B,IAAGA,YAAY,CAACG,IAAI,KAAK,OAAO,EAAC;QAC/B,IAAI,CAACb,OAAO,GAAG,OAAO;OACvB,MACI,IAAGU,YAAY,CAACG,IAAI,KAAK,SAAS,EAAC;QACtC,IAAI,CAACb,OAAO,GAAG,SAAS;OACzB,MACI,IAAGU,YAAY,CAACG,IAAI,KAAK,SAAS,EAAC;QACtC,IAAI,CAACb,OAAO,GAAG,SAAS;;MAE1BW,OAAO,CAACC,GAAG,CAAC,IAAI,CAACZ,OAAO,CAAC;KAC1B,QAAMc,KAAK,EAAE;MACZN,YAAY,CAACO,KAAK,EAAE;MACpB,IAAI,CAACjB,MAAM,CAACkB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;;EAEhC;EAEAC,MAAMA,CAAA;IACL,IAAI,CAAClB,IAAI,CAACmB,MAAM,EAAE;EACnB;CAIA;AA5CYtB,YAAY,GAAAuB,UAAA,EANxB3B,SAAS,CAAC;EACT4B,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,sBAAsB;EACnCC,SAAS,EAAE,CAAC,qBAAqB,CAAC;EAClCC,eAAe,EAAE9B,uBAAuB,CAAC+B;CAC1C,CAAC,C,EACW5B,YAAY,CA4CxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}